## AWS
### AWS Virtual Private Cloud (VPC)
- Virtual Private Cloud(VPC):
	-  사용자의 AWS 계정 전용 가상 네트워크입니다.

- 서브넷 
	- VPC의 IP 주소 범위입니다.

- 라우팅 테이블 
	- 네트워크 트래픽을 전달할 위치를 결정하는 데 사용되는 라우팅이라는 규칙 집합입니다.

- 인터넷 게이트웨이 
	- VPC의 리소스와 인터넷 간의 통신을 활성화하기 위해 VPC에 연결하는 게이트웨이입니다.

- VPC 엔드포인트 
	- 인터넷 게이트웨이, NAT 디바이스, VPN 연결 또는 AWS Direct Connect 연결을 필요로 하지 않고 PrivateLink 구동 지원 AWS 서비스 및 VPC 엔드포인트 서비스에 VPC를 비공개로 연결할 수 있습니다.
	- VPC의 인스턴스는 서비스의 리소스와 통신하는 데 퍼블릭 IP 주소를 필요로 하지 않습니다. 
	- VPC와 기타 서비스 간의 트래픽은 Amazon 네트워크를 벗어나지 않습니다.

#### VPC 
- vpc가 없을 때
	- 복잡한 네트워크 구조 
![VPC](https://miro.medium.com/max/1050/1*hZGJeN-4F6fLtus5XBJC_w.png)



- vpc 생성  

![vpc 생성](https://miro.medium.com/max/1050/1*Ehn4uEQMtbmdPsU6MxVc3Q.png)  

- VPC를 적용하면 위 그림과같이 VPC별로 네트워크를 구성 가능  
- 각각의 VPC에따라 다르게 네트워크 설정 가능   
- 각각의 VPC는 완전히 독립된 네트워크처럼 작동  

#### 라우팅 테이블 & 라우터  

![라우터](https://miro.medium.com/max/1350/1*C_j93s0KB4JwfLgck5YFug.png)

- 1. 네트워크 요청이 발생하면 데이터는 우선 라우터로 향하게됩니다.   
	- 라우터란 목적지이고 라우팅테이블은 각 목적지에 대한 이정표  
- 2. 네트워크 요청은 각각 정의된 라우팅테이블에따라 작동  
	- 서브넷A의 라우팅테이블은 172.31.0.0/16 즉 VPC안의 네트워크 범위를 갖는 네트워크 요청은 로컬에서 찾도록 되어있습니다.   
	- 하지만 그 이외 외부로 통하는 트래픽을 처리할 수 없습니다.  
	- 이때 인터넷 게이트웨이를 사용합니다.  

#### 인터넷 게이트웨이  

![게이트웨이](https://miro.medium.com/max/1350/1*I_3RxWyOPMj9lQs1xhEebg.png)
- 인터넷게이트웨이는 VPC와 인터넷을 연결해주는 하나의 관문
	- 서브넷B의 라우팅테이블을 잘보면 0.0.0.0/0으로 정의되어있습니다. 
		- 모든 트래픽에 대하여 IGA(인터넷 게이트웨이) A로 향하라는뜻
	- 라우팅테이블은 가장 먼저 목적지의 주소가 172.31.0.0/16에 매칭되는지를 확인한 후, 매칭되지 않는다면 IGA A로 보냅니다.
- 서브넷	
	-인터넷과 연결되어있는 서브넷을 퍼블릭서브넷
	- 인터넷과연결되어있지않는 서브넷을 프라이빗서브넷

#### 네트워크 ACL & 보안 그룹  

![보안그룹](https://miro.medium.com/max/945/1*hyUQHofL7FkFtJ3FnZ1IJA.png)
- 네트워크 ACL과 보안그룹은 방화벽과 같은 역할
	- 인바운드 트래픽과 아웃바운드 트래픽 보안정책을 설정

-보안그룹은 Stateful한 방식으로 동작하는 보안그룹은 모든 허용을 차단하도록 기본설정
	- 필요한 설정은 허용

-네트워크ACL과 다르게 각각의 보안그룹별로도 별도의 트래픽을 설정 가능
	- 서브넷에도 설정할 수 있지만 각각의 EC2인스턴스에도 적용

